<%# app/views/users_dashboard/show.html.erb %>
<div class="container mt-4">
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1>User Details</h1>
    <%= link_to "Back to Dashboard", users_dashboard_index_path, class: "btn btn-secondary" %>
  </div>

  <div class="card">
    <div class="card-body">
      <div class="row">
        <div class="col-md-6">
          <h3>Basic Information</h3>
          <dl class="row">
            <dt class="col-sm-4">Display Name</dt>
            <dd class="col-sm-8"><%= @user.display_name %></dd>

            <dt class="col-sm-4">First Name</dt>
            <dd class="col-sm-8"><%= @user.first_name %></dd>

            <dt class="col-sm-4">Last Name</dt>
            <dd class="col-sm-8"><%= @user.last_name %></dd>

            <dt class="col-sm-4">Email</dt>
            <dd class="col-sm-8"><%= @user.email %></dd>

            <dt class="col-sm-4">Principal Name</dt>
            <dd class="col-sm-8"><%= @user.principal_name %></dd>

            <dt class="col-sm-4">Uniqname</dt>
            <dd class="col-sm-8"><%= @user.uniqname %></dd>
          </dl>
        </div>

        <div class="col-md-6">
          <h3>Authentication Details</h3>
          <dl class="row">
            <dt class="col-sm-4">Current Sign In At</dt>
            <dd class="col-sm-8"><%= @user.current_sign_in_at&.strftime("%Y-%m-%d %H:%M:%S") %></dd>

            <dt class="col-sm-4">Last Sign In At</dt>
            <dd class="col-sm-8"><%= @user.last_sign_in_at&.strftime("%Y-%m-%d %H:%M:%S") %></dd>

            <dt class="col-sm-4">Current Sign In IP</dt>
            <dd class="col-sm-8"><%= @user.current_sign_in_ip %></dd>

            <dt class="col-sm-4">Last Sign In IP</dt>
            <dd class="col-sm-8"><%= @user.last_sign_in_ip %></dd>

            <dt class="col-sm-4">Sign In Count</dt>
            <dd class="col-sm-8"><%= @user.sign_in_count %></dd>

            <dt class="col-sm-4">Failed Attempts</dt>
            <dd class="col-sm-8"><%= @user.failed_attempts %></dd>

            <dt class="col-sm-4">Locked At</dt>
            <dd class="col-sm-8"><%= @user.locked_at&.strftime("%Y-%m-%d %H:%M:%S") %></dd>
          </dl>
        </div>
      </div>

      <div class="row mt-4">
        <div class="col-12">
          <h3>Roles</h3>
          <div class="mb-3">
            <% @user.roles.each do |role| %>
              <span class="badge bg-primary me-2"><%= role.kind %></span>
            <% end %>
          </div>
        </div>
        <div class="col-md-8">
          <h3>Assignments</h3>
          <div class="mb-3">
            <% @user.assignments.each do |assignment| %>
              <span class="badge bg-success me-2"><%= assignment.role.kind %> - <%= assignment.container.name %></span>
            <% end %>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <h3>System Information</h3>
          <dl class="row">
            <dt class="col-sm-2">UID</dt>
            <dd class="col-sm-10"><%= @user.uid %></dd>

            <dt class="col-sm-2">Created At</dt>
            <dd class="col-sm-10"><%= @user.created_at.strftime("%Y-%m-%d %H:%M:%S") %></dd>

            <dt class="col-sm-2">Updated At</dt>
            <dd class="col-sm-10"><%= @user.updated_at.strftime("%Y-%m-%d %H:%M:%S") %></dd>
          </dl>
        </div>
      </div>
    </div>
  </div>
</div>
