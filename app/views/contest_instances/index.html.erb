<div class="d-flex justify-content-between">
  <div>
    <h1><%= @contest_description.name %> Instances</h1>
  </div>
  <div>
    <%= link_to "Return to Manage Submissions", containers_path, class: "link_to" %>
  </div>
</div>

<!-- Add a checkbox to filter only Active contest instances -->
<div data-controller="filter">
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" id="statusFilter" data-action="change->filter#toggleFilter" data-filter-target="statusFilter">
    <label class="form-check-label" for="statusFilter">
      Show only <span class="fw-bolder">Active</span> contest instances
    </label>
  </div>

  
<!-- Add a checkbox to filter only Active contest instances -->
<div data-controller="filter">
  <div class="form-check mb-3">
    <input class="form-check-input" type="checkbox" id="statusFilter" data-action="change->filter#toggleFilter" data-filter-target="statusFilter">
    <label class="form-check-label" for="statusFilter">
      Show only <span class="fw-bolder">Active</span> contest instances
    </label>
  </div>

  <div id="contest_instances" class="table-responsive">
      <table class="table table-striped table-bordered">
        <thead class="thead-light">
          <tr>
            <th>Actions</th>
            <th>Active</th>
        <th>Archived</th>
            <th>Contest Description</th>
            <th>Date Open</th>
            <th>Date Closed</th>
            <th>Judging Open</th>
            <th>Judging Rounds</th>
            <th>Category</th>
            <th>Judge Evaluations Complete</th>
            <th>Class Level</th>
          </tr>
        </thead>
        <tbody>
          <% @contest_instances.each do |contest_instance| %>
            <tr data-status="<%= contest_instance.active %>" data-filter-target="filterRow" data-status="<%= contest_instance.active %>" data-filter-target="filterRow">
              <td>
                <%= link_to "View Details", container_contest_description_contest_instance_path(@container, @contest_description, contest_instance), class: "link_to" %>
              </td>
              <td><%= contest_instance.active %></td>
          <td><%= contest_instance.archived %></td>
              <td><%= contest_instance.contest_description.name %></td>
              <td><%= format_datetime(contest_instance.date_open) %></td>
              <td><%= format_datetime(contest_instance.date_closed) %></td>
              <td><%= contest_instance.judging_open %></td>
              <td><%= contest_instance.judging_rounds %></td>
              <td><%= contest_instance.categories.map(&:kind).join(', ') %></td>
              <td><%= contest_instance.judge_evaluations_complete %></td>
              <td><%= contest_instance.class_levels.map(&:name).join(', ') %></td>
            </tr>
          <% end %>
        </tbody>
      </table>
  </div>
  </div>
</div>

<%= link_to "Create New Contest Instance", new_container_contest_description_contest_instance_path(@container, @contest_description), class: "btn btn-sm btn-primary" %>